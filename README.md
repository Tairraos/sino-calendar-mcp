# ä¸­å›½å†œå†èŠ‚æ—¥è½¬æ¢MCPæœåŠ¡

ä¸€ä¸ªåŸºäºModel Context Protocol (MCP) çš„ä¸­å›½å†œå†èŠ‚æ—¥è½¬æ¢æœåŠ¡ï¼Œæä¾›å…¬å†ä¸å†œå†è½¬æ¢ã€ä¼ ç»ŸèŠ‚æ—¥è¯†åˆ«ã€24èŠ‚æ°”è®¡ç®—ã€å·¥ä½œæ—¥åˆ¤æ–­ç­‰åŠŸèƒ½ã€‚

**å¼€å‘æ—¥æœŸ**: 2025å¹´10æœˆ29æ—¥  
**å¼€å‘è€…**: Tairraos

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

- **å†œå†è½¬æ¢**ï¼šå…¬å†æ—¥æœŸè½¬æ¢ä¸ºå†œå†æ ¼å¼ï¼ˆå¤©å¹²åœ°æ”¯å¹´ä»½ï¼‰
- **èŠ‚æ—¥è¯†åˆ«**ï¼šè¯†åˆ«ä¼ ç»ŸèŠ‚æ—¥ï¼ˆæ˜¥èŠ‚ã€ä¸­ç§‹èŠ‚ã€ç«¯åˆèŠ‚ç­‰ï¼‰å’Œç°ä»£èŠ‚æ—¥
- **24èŠ‚æ°”**ï¼šå‡†ç¡®è®¡ç®—24èŠ‚æ°”æ—¥æœŸ
- **å·¥ä½œæ—¥åˆ¤æ–­**ï¼šæ”¯æŒæ³•å®šèŠ‚å‡æ—¥å’Œè°ƒä¼‘è§„å¾‹
- **æ—¥æœŸèŒƒå›´æŸ¥è¯¢**ï¼šæ‰¹é‡è·å–æ—¥æœŸèŒƒå›´å†…çš„ä¿¡æ¯
- **è¾“å…¥éªŒè¯**ï¼šå®Œå–„çš„æ—¥æœŸæ ¼å¼éªŒè¯å’Œé”™è¯¯å¤„ç†

## ğŸ“¦ å®‰è£…ä¸é…ç½®

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm æˆ– pnpm

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨npm
npm install

# æˆ–ä½¿ç”¨pnpm
pnpm install
```

### ç¼–è¯‘é¡¹ç›®

```bash
npm run build
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ç›´æ¥å¯åŠ¨æœåŠ¡

```bash
# æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
node start.js

# æ–¹å¼2ï¼šä½¿ç”¨npmè„šæœ¬
npm start

# æ–¹å¼3ï¼šç›´æ¥è¿è¡Œç¼–è¯‘åçš„æ–‡ä»¶
node dist/index.js
```

### 2. ä½œä¸ºMCPæœåŠ¡å™¨

åœ¨MCPå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "sino-calendar": {
      "command": "node",
      "args": ["/path/to/sino-calendar-mcp/start.js"],
      "env": {}
    }
  }
}
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡ŒåŠŸèƒ½æµ‹è¯•
npm test

# è¿è¡Œç¼–è¯‘æ£€æŸ¥
npm run check
```

## ğŸ› ï¸ API æ¥å£

### get_date_info

è·å–æŒ‡å®šæ—¥æœŸçš„å®Œæ•´ä¿¡æ¯ã€‚

**å‚æ•°ï¼š**
- `date` (string): æ—¥æœŸï¼Œæ ¼å¼ä¸º YYYY-MM-DD

**ç¤ºä¾‹ï¼š**
```json
{
  "name": "get_date_info",
  "arguments": {
    "date": "2025-01-29"
  }
}
```

**è¿”å›ï¼š**
```json
{
  "date": "2025å¹´1æœˆ29æ—¥",
  "week": "æ˜ŸæœŸä¸‰",
  "dayType": "ä¼‘æ¯æ—¥",
  "lunarDate": "ä¹™å·³å¹´æ­£æœˆåˆä¸€",
  "adjusted": "è°ƒä¼‘",
  "festival": "æ˜¥èŠ‚"
}
```

### get_date_range_info

è·å–æ—¥æœŸèŒƒå›´å†…æ‰€æœ‰æ—¥æœŸçš„ä¿¡æ¯ã€‚

**å‚æ•°ï¼š**
- `startDate` (string): å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ä¸º YYYY-MM-DD
- `endDate` (string): ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ä¸º YYYY-MM-DD

**é™åˆ¶ï¼š**
- æ—¥æœŸèŒƒå›´ä¸èƒ½è¶…è¿‡366å¤©

**ç¤ºä¾‹ï¼š**
```json
{
  "name": "get_date_range_info",
  "arguments": {
    "startDate": "2025-01-28",
    "endDate": "2025-02-03"
  }
}
```

**è¿”å›ï¼š**
```json
{
  "dates": [
    {
      "date": "2025å¹´1æœˆ28æ—¥",
      "week": "æ˜ŸæœŸäºŒ",
      "dayType": "ä¼‘æ¯æ—¥",
      "lunarDate": "ä¹™å·³å¹´è…Šæœˆå»¿ä¹",
      "adjusted": "è°ƒä¼‘",
      "festival": "é™¤å¤•"
    },
    // ... æ›´å¤šæ—¥æœŸä¿¡æ¯
  ]
}
```

## ğŸ“Š æ•°æ®å­—æ®µè¯´æ˜

### åŸºç¡€å­—æ®µ

- `date`: ä¸­æ–‡æ ¼å¼çš„å…¬å†æ—¥æœŸ
- `week`: ä¸­æ–‡æ ¼å¼çš„æ˜ŸæœŸ
- `dayType`: æ—¥æœŸç±»å‹ï¼ˆ"å·¥ä½œæ—¥" | "ä¼‘æ¯æ—¥"ï¼‰
- `lunarDate`: å†œå†æ—¥æœŸï¼ˆå¤©å¹²åœ°æ”¯å¹´ä»½ + æœˆä»½ + æ—¥æœŸï¼‰

### å¯é€‰å­—æ®µ

- `adjusted`: è°ƒä¼‘ä¿¡æ¯ï¼ˆ"è°ƒä¼‘" | "è¡¥ç­"ï¼‰
- `festival`: èŠ‚æ—¥åç§°
- `solarTerm`: 24èŠ‚æ°”åç§°

### æ—¥æœŸç±»å‹è¯´æ˜

- **å·¥ä½œæ—¥**: æ­£å¸¸å·¥ä½œæ—¥
- **ä¼‘æ¯æ—¥**: å‘¨æœ«æˆ–æ³•å®šèŠ‚å‡æ—¥
- **è°ƒä¼‘**: å› èŠ‚å‡æ—¥è°ƒæ•´çš„ä¼‘æ¯æ—¥
- **è¡¥ç­**: å› èŠ‚å‡æ—¥è°ƒæ•´çš„å·¥ä½œæ—¥

## ğŸ¯ æ”¯æŒçš„èŠ‚æ—¥

### ä¼ ç»ŸèŠ‚æ—¥
- æ˜¥èŠ‚ã€å…ƒå®µèŠ‚ã€æ¸…æ˜èŠ‚ã€ç«¯åˆèŠ‚ã€ä¸ƒå¤•èŠ‚ã€ä¸­ç§‹èŠ‚ã€é‡é˜³èŠ‚ã€è…Šå…«èŠ‚ã€é™¤å¤•

### ç°ä»£èŠ‚æ—¥
- å…ƒæ—¦ã€å¦‡å¥³èŠ‚ã€åŠ³åŠ¨èŠ‚ã€é’å¹´èŠ‚ã€å„¿ç«¥èŠ‚ã€å»ºå…šèŠ‚ã€å»ºå†›èŠ‚ã€æ•™å¸ˆèŠ‚ã€å›½åº†èŠ‚

### 24èŠ‚æ°”
- ç«‹æ˜¥ã€é›¨æ°´ã€æƒŠè›°ã€æ˜¥åˆ†ã€æ¸…æ˜ã€è°·é›¨
- ç«‹å¤ã€å°æ»¡ã€èŠ’ç§ã€å¤è‡³ã€å°æš‘ã€å¤§æš‘
- ç«‹ç§‹ã€å¤„æš‘ã€ç™½éœ²ã€ç§‹åˆ†ã€å¯’éœ²ã€éœœé™
- ç«‹å†¬ã€å°é›ªã€å¤§é›ªã€å†¬è‡³ã€å°å¯’ã€å¤§å¯’

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
sino-calendar-mcp/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ engines/           # ä¸šåŠ¡å¼•æ“
â”‚   â”‚   â”œâ”€â”€ dateInfoEngine.ts    # æ—¥æœŸä¿¡æ¯å¼•æ“
â”‚   â”‚   â”œâ”€â”€ lunarEngine.ts       # å†œå†è½¬æ¢å¼•æ“
â”‚   â”‚   â”œâ”€â”€ festivalEngine.ts    # èŠ‚æ—¥è¯†åˆ«å¼•æ“
â”‚   â”‚   â”œâ”€â”€ solarTermEngine.ts   # 24èŠ‚æ°”å¼•æ“
â”‚   â”‚   â””â”€â”€ workdayEngine.ts     # å·¥ä½œæ—¥åˆ¤æ–­å¼•æ“
â”‚   â”œâ”€â”€ data/              # æ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ festivals.ts         # èŠ‚æ—¥æ•°æ®
â”‚   â”‚   â”œâ”€â”€ solarTerms.ts        # 24èŠ‚æ°”æ•°æ®
â”‚   â”‚   â””â”€â”€ workdayRules.ts      # å·¥ä½œæ—¥è§„åˆ™
â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ dateUtils.ts         # æ—¥æœŸå·¥å…·
â”‚   â”‚   â”œâ”€â”€ validator.ts         # è¾“å…¥éªŒè¯
â”‚   â”‚   â””â”€â”€ errorHandler.ts      # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts             # ä¸»è¦ç±»å‹
â”‚   â”‚   â””â”€â”€ lunar-javascript.d.ts # ç¬¬ä¸‰æ–¹åº“ç±»å‹
â”‚   â””â”€â”€ index.ts           # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ dist/                  # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ test.js               # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ start.js              # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md             # ä½¿ç”¨è¯´æ˜
```

### æ·»åŠ æ–°èŠ‚æ—¥

1. åœ¨ `src/data/festivals.ts` ä¸­æ·»åŠ èŠ‚æ—¥å®šä¹‰
2. æ›´æ–° `FestivalEngine` çš„è¯†åˆ«é€»è¾‘
3. è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸

### æ·»åŠ æ–°çš„å·¥ä½œæ—¥è§„åˆ™

1. åœ¨ `src/data/workdayRules.ts` ä¸­æ·»åŠ è§„åˆ™
2. æ›´æ–° `WorkdayEngine` çš„åˆ¤æ–­é€»è¾‘
3. è¿è¡Œæµ‹è¯•éªŒè¯å‡†ç¡®æ€§

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¼–è¯‘é”™è¯¯**
   ```bash
   npm run build
   ```

2. **ä¾èµ–é—®é¢˜**
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```

3. **Node.jsç‰ˆæœ¬è¿‡ä½**
   - ç¡®ä¿ä½¿ç”¨ Node.js 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬

4. **æ—¥æœŸè§£æé”™è¯¯**
   - ç¡®ä¿æ—¥æœŸæ ¼å¼ä¸º YYYY-MM-DD
   - æ£€æŸ¥æ—¥æœŸæ˜¯å¦æœ‰æ•ˆï¼ˆå¦‚2æœˆ30æ—¥æ— æ•ˆï¼‰

### è°ƒè¯•æ¨¡å¼

è®¾ç½®ç¯å¢ƒå˜é‡å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```bash
DEBUG=sino-calendar:* node start.js
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ‘¨â€ğŸ’» å¼€å‘è€…

**Tairraos** - é¡¹ç›®åˆ›å»ºè€…å’Œç»´æŠ¤è€…  
å¼€å‘æ—¶é—´ï¼š2025å¹´10æœˆ29æ—¥

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ GitHub Issue
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
- è¿è¡Œæµ‹è¯•è„šæœ¬è¿›è¡Œè‡ªæ£€

---

**æ³¨æ„**: æœ¬æœåŠ¡åŸºäº `lunar-javascript` åº“è¿›è¡Œå†œå†è®¡ç®—ï¼ŒèŠ‚æ—¥å’Œå·¥ä½œæ—¥æ•°æ®åŸºäºä¸­å›½å¤§é™†çš„æ³•å®šè§„å®šã€‚